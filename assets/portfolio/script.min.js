function w(){const t=document.getElementById("rgpd-link"),e=document.getElementById("rgpd-modal"),o=document.getElementById("rgpd-close");t&&e&&o&&(t.addEventListener("click",r=>{r.preventDefault(),e.style.display="flex",e.setAttribute("aria-hidden","false"),e.focus()}),o.addEventListener("click",()=>{e.style.display="none",e.setAttribute("aria-hidden","true"),t.focus()}),e.addEventListener("keydown",r=>{r.key==="Escape"&&(e.style.display="none",e.setAttribute("aria-hidden","true"),t.focus())}))}document.addEventListener("DOMContentLoaded",()=>{const t=setInterval(()=>{document.getElementById("rgpd-link")&&document.getElementById("rgpd-modal")&&(clearInterval(t),w())},100)});import{utilEscapeHTML as i}from"../utils/utils.js";const n={searchInput:null,clearButton:null,infoElement:null,projectsList:null,footer:null,preloader:null,init(){this.searchInput=document.getElementById("search-input"),this.clearButton=document.getElementById("search-clear"),this.infoElement=document.getElementById("search-results-info"),this.projectsList=document.getElementById("projects-list"),this.footer=document.getElementById("site-footer"),this.preloader=document.getElementById("preloader")},isReady(){return this.searchInput&&this.clearButton&&this.infoElement&&this.projectsList}};function c(t){if(n.projectsList){if(n.projectsList.innerHTML="",!t||t.length===0){n.projectsList.innerHTML='<div style="color:#00fff0;text-align:center;margin:2em auto;">Aucun dépôt public trouvé.</div>';return}t.forEach(e=>{const o=new Date(e.updated_at),s=Math.floor((new Date-o)/(1e3*60*60*24)),a=s<=30,l=document.createElement("div");l.className="project-tile",a&&l.setAttribute("data-new","true");const f=i(e.name),m=i(e.description||"Aucune description disponible."),h=i(e.html_url),y=i(e.default_branch||"main");l.innerHTML=E({safeName:f,safeDesc:m,safeUrl:h,safeBranch:y,isNew:a,daysElapsed:s}),n.projectsList.appendChild(l)})}}function E({safeName:t,safeDesc:e,safeUrl:o,safeBranch:r,isNew:s,daysElapsed:a}){return`
        <div class="terminal-bar">
            <span class="btn red"></span>
            <span class="btn yellow"></span>
            <span class="btn green"></span>
            <span class="terminal-bar-title">kali@root:~$</span>
        </div>
        <div class="project-tile-content">
            <div class="terminal-prompt tron-terminal">
                <div class="tron-prompt-line1"><span class="prompt-user tron-prompt-user">◢◤ <span class="tron-username">0xCyberLiTech</span></span></div>
                <div class="tron-prompt-line2"><span class="tron-at">@</span> <span class="tron-host">TRON-CORE</span></div>
                <div class="tron-prompt-line3"><span class="tron-path">[~/grid/${t}]</span></div>
                <span class="prompt-command tron-prompt-command">◢◤ <span class="tron-cmd">$</span> <span class="tron-cmdline">ls -la</span></span>
            </div>
            <h3><a href="${o}/blob/${r}/README.md" style="color:inherit;text-decoration:none;">${t}</a></h3>
            <p class="terminal-output project-description">${e}</p>
            <div class="infos" style="display:flex;align-items:center;gap:0.7em;justify-content:space-between;">
                ${s?`<span class="badge-new tron-glow">NEW</span><span class="days-left tron-glow" style="font-size:0.98em;color:#00fff0;opacity:0.92;">${30-a}j restantes</span>`:""}
            </div>
        </div>
    `}function g(t,e){if(!e||e.trim()==="")return t;const o=e.toLowerCase().trim();return t.filter(r=>{const s=(r.name||"").toLowerCase(),a=(r.description||"").toLowerCase();return s.includes(o)||a.includes(o)})}function d(t,e,o){if(!(!n.infoElement||!n.searchInput))if(!o||o.trim()==="")n.infoElement.textContent="";else{const r=i(o);if(e===0)v(n.searchInput,`Aucun résultat pour "${o}"`),n.infoElement.textContent="";else{const s=i(r);n.infoElement.innerHTML=`${e} résultat${e>1?"s":""} pour "<span style="color: var(--tron-orange);">${s}</span>"`,n.infoElement.style.color="var(--tron-cyan)",n.infoElement.style.textAlign="center"}}}function v(t,e){window.searchErrorTimeout&&clearTimeout(window.searchErrorTimeout),t.value=e,t.style.color="var(--tron-orange)",t.readOnly=!0,n.clearButton&&(n.clearButton.style.opacity="0"),window.searchErrorTimeout=setTimeout(()=>{t.value="",t.style.color="#00fff0",t.readOnly=!1,t.focus(),window.__allRepos&&Array.isArray(window.__allRepos)&&c(window.__allRepos),n.infoElement&&(n.infoElement.textContent=""),window.searchErrorTimeout=null},3e3)}function b(t){if(!n.infoElement)return;const e=3-t;n.infoElement.textContent=`Encore ${e} caractère${e>1?"s":""} pour lancer la recherche`,n.infoElement.style.color="#00fff0",n.infoElement.style.opacity="1"}function u(){if(!n.searchInput||!n.clearButton)return;let t;n.searchInput.addEventListener("input",e=>{const o=e.target.value;window.searchErrorTimeout&&(clearTimeout(window.searchErrorTimeout),window.searchErrorTimeout=null,n.searchInput.readOnly=!1,n.searchInput.style.color="#00fff0"),n.clearButton.style.opacity=o?"1":"0",clearTimeout(t),t=setTimeout(()=>{p(o)},300)}),n.clearButton.addEventListener("click",()=>{window.searchErrorTimeout&&(clearTimeout(window.searchErrorTimeout),window.searchErrorTimeout=null),n.searchInput.value="",n.clearButton.style.opacity="0",n.searchInput.readOnly=!1,n.searchInput.style.color="#00fff0",n.infoElement&&(n.infoElement.textContent=""),p(""),n.searchInput.focus()}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="k"&&(e.preventDefault(),n.searchInput.focus())}),n.searchInput.addEventListener("focus",()=>{n.searchInput.style.boxShadow="0 0 25px rgba(0, 255, 240, 0.5)",n.searchInput.style.borderColor="var(--tron-orange)"}),n.searchInput.addEventListener("blur",()=>{n.searchInput.style.boxShadow="0 0 15px rgba(0, 255, 240, 0.3)",n.searchInput.style.borderColor="var(--tron-cyan)"}),window.searchErrorTimeout=null}function p(t){if(!window.__allRepos||!Array.isArray(window.__allRepos)){console.warn("Aucun repository chargé pour la recherche");return}const e=t.trim();if(e===""||e.length>=3){const o=g(window.__allRepos,t);c(o),d(window.__allRepos.length,o.length,t)}else b(e.length)}async function I(){window.__allRepos=[];try{const t=await fetch("https://api.github.com/users/0xCyberLiTech/repos");if(!t.ok)throw new Error(`HTTP ${t.status} - ${t.statusText}`);const o=(await t.json()).filter(r=>r.name!=="0xCyberLiTech.github.io"&&r.name!=="0xCyberLiTech");window.__allRepos=o,c(o),u(),d(o.length,o.length,"")}catch(t){alert("Erreur lors du chargement des dépôts : "+(t.message||t))}}window.addEventListener("DOMContentLoaded",()=>{document.body.style.opacity="1",document.body.classList.add("fade-in"),setTimeout(()=>document.body.classList.remove("fade-in"),1200),n.init(),n.isReady()&&u(),I();const t=n.footer;if(t){t.style.display="none";const e=n.preloader;if(e){const o=new MutationObserver(()=>{(e.style.display==="none"||e.style.opacity==="0"||e.hidden)&&(t.style.display="",o.disconnect())});o.observe(e,{attributes:!0,attributeFilter:["style","hidden"]})}else setTimeout(()=>{t.style.display=""},600)}});
